import{r as l,j as e}from"./react-CtW5r0F0.js";import{c as P}from"./react-dom-CoD-mNjq.js";import{L as N,B as A}from"./react-router-dom-PfkClVPT.js";import"./firebase-DiOcBtie.js";import{i as E,g as k,a as I,s as R,b as F,d as w,c as M,e as D,q as H,f as z,w as B,h as O,T as Y,o as q}from"./@firebase-CbOWj4it.js";import{a as g}from"./js-cookie-Cz0CWeBA.js";import{a as S,d as T,e as v,f as W}from"./react-router-ChgmKJH0.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Br25Cn4W.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const K={apiKey:"AIzaSyCFTjXwKBXvGB7O2LlH0dofCwLf5A6U-PU",authDomain:"payment-app-84e62.firebaseapp.com",projectId:"payment-app-84e62",storageBucket:"payment-app-84e62.appspot.com",messagingSenderId:"822871875110",appId:"1:822871875110:web:1f07d5e85f26a143d410e7",measurementId:"G-5KKFQMLKF9"},L=E(K),C=k(L),f=I(L),G=()=>{const[t,n]=l.useState(!0),[o,i]=l.useState(""),[s,r]=l.useState(""),[m,b]=l.useState(""),[h,j]=l.useState(!1),a=S(),y=async d=>{var x;d.preventDefault(),j(!0);try{if(t){const c=await R(C,o,s),p=(x=(await F(w(f,"users",c.user.uid))).data())==null?void 0:x.username;g.set("username",p,{expires:1})}else{const c=await M(C,o,s);await D(w(f,"users",c.user.uid),{username:m,email:o}),g.set("username",m,{expires:1})}a("/dashboard")}catch(c){console.error("Authentication Error:",c.message)}finally{j(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-md shadow-md w-96",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Support a Cause"}),e.jsx("p",{className:"text-gray-600",children:"Join us in making a difference! Your contributions help fund various charitable projects aimed at improving lives. Together, we can create a better tomorrow."}),e.jsx("p",{className:"text-gray-700 mt-2",children:"Consider donating while signing up!"})]}),e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:t?"Login":"Register"}),e.jsxs("form",{onSubmit:y,children:[!t&&e.jsx("input",{type:"text",placeholder:"Username",value:m,onChange:d=>b(d.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),e.jsx("input",{type:"email",placeholder:"Email",value:o,onChange:d=>i(d.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:d=>r(d.target.value),className:"w-full mb-4 p-2 border rounded",required:!0}),e.jsx("button",{type:"submit",className:`w-full bg-gray-600 text-white p-2 rounded hover:bg-gray-700 active:bg-gray-600 ${h?"opacity-50 cursor-not-allowed":""}`,disabled:h,children:h?"Loading...":t?"Sign In":"Register"})]}),h&&e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("span",{className:"loader"})," ",e.jsx("p",{className:"text-gray-500 mt-2",children:"Redirecting to dashboard..."})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{children:[t?"Don't have an account?":"Already have an account?"," ",e.jsx("button",{className:"text-blue-500 hover:underline",onClick:()=>n(!t),disabled:h,children:t?"Register here":"Login here"})]})})]})})},J=()=>{const t=S(),n=g.get("username"),o=()=>{g.remove("username"),t("/")};return e.jsxs("header",{className:"bg-gray-700 text-white p-4 flex justify-between items-center rounded-b-md bg-gradient-to-b",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Heart Charity"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Hello, ",n||"User","!"]}),e.jsx("button",{onClick:o,className:"bg-red-500 px-4 py-2 rounded hover:bg-red-700",children:"Logout"})]})]})},U=({user:t})=>{const[n,o]=l.useState([]),[i,s]=l.useState(50),[r,m]=l.useState(""),[b,h]=l.useState(0);l.useEffect(()=>{(async()=>{if(!(!t||!t.uid))try{const y=H(z(f,"payments"),B("userId","==",t.uid)),d=await O(y),x=[];let c=0;d.forEach(u=>{const p={id:u.id,...u.data()};x.push({id:p.id,amount:p.amount,charity:p.charity,date:p.date.toDate()}),c+=p.amount}),o(x),h(c)}catch(y){console.error("Failed to fetch payment data",y)}})()},[t]);const j=async()=>{if(!r){alert("Please select a charity before proceeding.");return}const a={key:"rzp_live_hoGPJY2ykACPY4",amount:i*100,currency:"INR",name:"Your Charity Name",description:`Donation to ${r}`,handler:async function(d){const{razorpay_payment_id:x}=d;console.log("Payment Successful",x);try{await D(w(f,"payments",x),{userId:t.uid,amount:i,charity:r,date:Y.now()});const c={id:x,amount:i,charity:r,date:new Date};o(u=>[...u,c]),h(u=>u+i),alert("Payment successful")}catch(c){console.error("Error saving payment data:",c),alert("Payment successful, but failed to save the transaction.")}},prefill:{name:(t==null?void 0:t.username)||"Guest",email:(t==null?void 0:t.email)||""},theme:{color:"#F37254"}};new window.Razorpay(a).open()};return e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center ",children:"Charity Dashboard"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Make a Donation"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Choose an amount and charity to support"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Donation Amount"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[[1,25,50,100].map(a=>e.jsxs("button",{className:`py-2 px-4 rounded ${i===a?"bg-blue-500 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,onClick:()=>s(a),children:["₹",a]},a)),e.jsx("input",{type:"number",placeholder:"Custom amount",className:"w-32 px-3 py-2 border rounded bg-gray-200 focus:outline-none",onChange:a=>s(Number(a.target.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Charity"}),e.jsxs("select",{value:r,onChange:a=>m(a.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Choose a charity"}),e.jsx("option",{value:"Health & Medical",children:"Health & Medical"}),e.jsx("option",{value:"Animal Welfare",children:"Animal Welfare"}),e.jsx("option",{value:"Education",children:"Education"}),e.jsx("option",{value:"Local Charities",children:"Local Charities"})]})]})]}),e.jsx("button",{onClick:j,className:"w-full mt-6 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 active:bg-blue-500 transition duration-300",children:"Proceed to Payment"})]}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Payment History"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your recent donations"}),n.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No payment history available."}):e.jsx("ul",{className:"space-y-4",children:n.map(a=>e.jsxs("li",{className:"flex justify-between items-center py-2 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.charity}),e.jsx("p",{className:"text-sm text-gray-500",children:a.date.toLocaleDateString()})]}),e.jsxs("span",{className:"font-bold",children:["₹",a.amount.toFixed(2)]})]},a.id))}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Total Donations"}),e.jsxs("span",{className:"font-bold text-lg",children:["₹",b.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Your Impact"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"See how your donations are making a difference"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-4xl font-bold mb-2",children:["₹",b.toFixed(2)]}),e.jsx("p",{className:"text-xl",children:"Total Amount Donated"})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:n.length}),e.jsx("p",{children:"Donations Made"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:new Set(n.map(a=>a.charity)).size}),e.jsx("p",{children:"Charities Supported"})]})]})]})]})},_=()=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[e.jsx("header",{className:"bg-gray-700 text-white py-4 px-6 rounded-b-md",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Heart Charity"}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(N,{to:"/login",className:"border border-white text-white hover:bg-gray-600 px-4 py-2 rounded",children:"Login"}),e.jsx(N,{to:"/login",assName:"bg-gray-400 text-gray-900 hover:bg-gray-300 px-4 py-2 rounded",children:"Register"})]})]})}),e.jsxs("main",{className:"flex-grow",children:[e.jsx("section",{className:"py-12 px-6 bg-gradient-to-b from-gray-500 to-gray-100",children:e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsx("h2",{className:"text-4xl font-bold mb-6 text-gray-900",children:"Your Donation, Our Mission"}),e.jsx("p",{className:"text-xl text-gray-800 mb-8 max-w-2xl mx-auto",children:"Join us in making a difference. Every donation, no matter how small, helps us create positive change in communities worldwide."})]})}),e.jsx("section",{className:"py-12 px-6 bg-gray-200",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h3",{className:"text-3xl font-bold mb-8 text-center text-gray-800",children:"Where Your Donation Goes"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-teal-100 border-teal-300 p-6 rounded",children:[e.jsx("h4",{className:"text-teal-700",children:"Education Support"}),e.jsx("p",{className:"text-teal-600",children:"Providing educational resources and scholarships to underprivileged children."})]}),e.jsxs("div",{className:"bg-cyan-100 border-cyan-300 p-6 rounded",children:[e.jsx("h4",{className:"text-cyan-700",children:"Healthcare Initiatives"}),e.jsx("p",{className:"text-cyan-600",children:"Funding medical camps and healthcare facilities in underserved areas."})]}),e.jsxs("div",{className:"bg-gray-100 border-gray-300 p-6 rounded",children:[e.jsx("h4",{className:"text-gray-700",children:"Community Development"}),e.jsx("p",{className:"text-gray-600",children:"Building infrastructure and supporting local businesses in rural communities."})]}),e.jsxs("div",{className:"bg-emerald-100 border-emerald-300 p-6 rounded",children:[e.jsx("h4",{className:"text-emerald-700",children:"Emergency Relief"}),e.jsx("p",{className:"text-emerald-600",children:"Providing immediate assistance to areas affected by natural disasters."})]})]})]})}),e.jsx("section",{className:"py-12 px-6",children:e.jsxs("div",{className:"container mx-auto text-center",children:[e.jsx("h3",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Every Donation Matters"}),e.jsx("p",{className:"text-xl text-gray-700 mb-8 max-w-2xl mx-auto",children:"Whether it's ₹25 or ₹100, your contribution can make a real difference in someone's life. Join us in our mission to create a better world for all."}),e.jsx(N,{to:"/login",className:"bg-gray-600 text-white hover:bg-gray-700 text-lg px-8 py-4 rounded",children:"Make a Donation"})]})})]}),e.jsx("footer",{className:"bg-gray-700 text-white py-6 px-6",children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsx("p",{children:"© 2024 Heart Charity. All rights reserved."})})})]}),$=({children:t})=>g.get("username")?t:e.jsx(W,{to:"/"}),Q=()=>{const[t,n]=l.useState(null);return l.useEffect(()=>{const o=q(C,i=>{n(i),i?g.set("username",i.displayName||i.email,{expires:1}):g.remove("username")});return()=>o()},[]),e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(v,{path:"/",element:e.jsx(_,{})})," ",e.jsx(v,{path:"/login",element:e.jsx(G,{})}),e.jsx(v,{path:"/dashboard",element:e.jsxs($,{children:[e.jsx(J,{}),e.jsx(U,{user:t})]})})]})})};P(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Q,{})}));
